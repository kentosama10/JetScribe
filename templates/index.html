<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>WhisperX Web UI</title>
  <style>
    body { font-family: Arial; max-width: 800px; margin: 40px auto; }
    label { display:block; margin-top: 12px; }
    .muted { color: #666; font-size: 0.9em; }
  </style>
</head>
<body>
  <h1>WhisperX — Upload & Transcribe</h1>

  <form action="{{ url_for('transcribe') }}" method="post" enctype="multipart/form-data" onsubmit="onSubmit()">
    <label>Choose file:
      <input type="file" name="file" required>
    </label>

    <label>Model:
      <select name="model">
        <option>tiny</option>
        <option>base</option>
        <option>small</option>
        <option selected>medium</option>
        <option>large-v2</option>
        <option>large-v3</option>
      </select>
    </label>

    <label>Output format:
      <select name="format">
        <option value="txt" selected>txt</option>
        <option value="srt">srt</option>
        <option value="json">json</option>
        <option value="txt,srt,json">all</option>
      </select>
    </label>

    <label>Device:
      <select name="device">
        <option value="cpu" selected>cpu</option>
        <option value="cuda">cuda</option>
      </select>
    </label>

    <label><input type="checkbox" name="timestamped_txt"> Create timestamped TXT (makes sure JSON is produced)</label>

    <label><input type="checkbox" name="diarize"> Enable diarization (pyannote) — requires HF token</label>
    <label>Hugging Face token: <input type="password" name="hf_token" placeholder="hf_xxx"></label>

    <p class="muted">Large models take a long time and need more RAM/VRAM. For testing, use small/medium.</p>

    <button type="submit" id="submitBtn">Upload & Transcribe</button>
  </form>

  <div id="status" style="margin-top:20px; color:green;"></div>

  <script>
    function onSubmit(){
      document.getElementById('submitBtn').disabled = true;
      document.getElementById('status').innerText = "Uploading & processing — this can take a while for big files. Please wait...";
    }
  </script>
</body>
</html>
